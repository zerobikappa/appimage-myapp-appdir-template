#!/bin/bash

function setting_list(){
	kdialog --title "exe info setting" --menu "select one of items to go" 1 "set exe file location($EXENAME)" 2 "set savedata directory location($SAVEDATA_DIR)" --ok-label "go" --cancel-label "close" 
}

function exe_location(){
	TEMP=$(kdialog --title "select the .exe file" --getopenfilename $APPIMAGE_CONFIG_DIR 'application/octet-stream')
	if [[ $? -eq 0 ]];
	then
		EXEPATH=$TEMP
		EXENAME=$(basename $TEMP)
	fi

}

function savedata_location(){
	TEMP=$(kdialog --title "select the directory where to save the savedata files" --getexistingdirectory $APPIMAGE_CONFIG_DIR)
	if [[ $? -eq 0 ]];
	then
		SAVEDATA_DIR=$TEMP
	fi
}


while true; do
	SELECT_RETURN=$(setting_list)
	SETTING_LIST_STATUS_RETURN=$?
	if [[ $SETTING_LIST_STATUS_RETURN -eq 0 ]];
	then
		if [[ $SELECT_RETURN -eq 1 ]];
		then 
			exe_location
		elif [[ $SELECT_RETURN -eq 2 ]];
		then
			savedata_location
		else
			kdialog --msgbox "No item was selected.\n Please select one of items to go."
		fi
	else
		break
	fi
done
